apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "flashsale.fullname" . }}-config
  labels:
    {{- include "flashsale.labels" . | nindent 4 }}
data:
  # 环境配置
  ENV: {{ .Values.env | quote }}

  # MySQL 配置
  MYSQL_HOST: {{ .Values.config.mysql.host | quote }}
  MYSQL_PORT: {{ .Values.config.mysql.port | quote }}

  # Redis 配置
  REDIS_HOST: {{ .Values.config.redis.host | quote }}
  REDIS_PORT: {{ .Values.config.redis.port | quote }}

  # Kafka 配置
  KAFKA_BROKERS: {{ .Values.config.kafka.brokers | quote }}

  # Jaeger 配置
  {{- if .Values.config.jaeger }}
  JAEGER_ENDPOINT: {{ .Values.config.jaeger.endpoint | quote }}
  {{- end }}

  # 时区配置
  TZ: "Asia/Shanghai"

  # 日志配置
  LOG_LEVEL: {{ .Values.config.logLevel | default "info" | quote }}
  LOG_MODE: {{ .Values.config.logMode | default "console" | quote }}
